3つの手法について、同じ視点で比較できるように説明します。

### 1. Cannyエッジ検出 + テクスチャ検出

**概要：**
Cannyエッジ検出は、画像内の輝度が急激に変化する部分（エッジ）を検出する手法です。テクスチャ検出と組み合わせることで、表面の凹凸や模様の変化も検出します。鋳巣のような穴状の欠陥は、周囲との輝度差やテクスチャの違いとして現れます。

**処理手順：**
1. **前処理**
   - グレースケール変換：カラー画像をグレースケールに変換
   - ノイズ除去：ガウシアンフィルタでノイズを軽減

2. **エッジ検出（Canny）**
   - 輝度の勾配を計算
   - エッジの方向(輝度が急激に変化する方向)を決定
   - 二重閾値処理でエッジを抽出

3. **テクスチャ検出**
   - 局所的な領域の特徴（凹凸や模様）を分析
   - テクスチャの変化部分を検出

4. **欠陥候補の抽出**
   - エッジとテクスチャの検出結果を組み合わせ
   - 連結成分分析で欠陥候補領域を特定
   - 各候補領域を矩形で切り出し

### 2. LoG（Laplacian of Gaussian）フィルタ + 適応的閾値処理

**概要：**
LoGフィルタは、画像をぼかしてから2次微分を行う手法です。これにより、輝度の変化が急激な部分（鋳巣の縁など）を強調できます。適応的閾値処理と組み合わせることで、局所的な明るさの違いに対応しながら欠陥を検出します。

**処理手順：**
1. **前処理**
   - グレースケール変換：カラー画像をグレースケールに変換
   - 初期ノイズ除去：軽いぼかし処理

2. **LoGフィルタ処理**
   - ガウシアンフィルタで画像をぼかし
   - ラプラシアンフィルタで2次微分を計算
   - 複数のぼかしの強さ（σ値）で処理を実行

3. **適応的閾値処理**
   - 局所的な領域ごとに最適な閾値を計算
   - 閾値に基づいて欠陥候補を二値化

4. **欠陥候補の抽出**
   - 異なるσ値での結果を統合
   - 連結成分分析で欠陥候補領域を特定
   - 各候補領域を矩形で切り出し

### 3. DoG（Difference of Gaussian）フィルタ + 動的閾値処理

**概要：**
DoGフィルタは、異なる強さでぼかした2つの画像の差分を取る手法です。これにより、特定のサイズの特徴（鋳巣など）を強調できます。動的閾値処理と組み合わせることで、画像全体の特性に応じて欠陥を検出します。

**処理手順：**
1. **前処理**
   - グレースケール変換：カラー画像をグレースケールに変換
   - 初期ノイズ除去：軽いぼかし処理

2. **DoGフィルタ処理**
   - 2つの異なる強さ（σ値）でガウシアンぼかしを適用
   - 2つのぼかし画像の差分を計算
   - 複数のσ値の組み合わせで処理を実行

3. **動的閾値処理**
   - 画像全体の統計量（平均、標準偏差）を計算
   - 統計量に基づいて閾値を決定
   - 閾値に基づいて欠陥候補を二値化

4. **欠陥候補の抽出**
   - 異なるσ値の組み合わせでの結果を統合
   - 連結成分分析で欠陥候補領域を特定
   - 各候補領域を矩形で切り出し

### 各手法の特徴的な違い：

**検出原理**
- Canny + テクスチャ：エッジとテクスチャの組み合わせで検出
- LoG：2次微分による急激な変化の検出
- DoG：異なるスケールでの差分による特徴検出

**閾値処理**
- Canny + テクスチャ：固定の二重閾値
- LoG：局所的な適応閾値
- DoG：画像全体の統計に基づく動的閾値

**スケール対応**
- Canny + テクスチャ：単一スケール
- LoG：複数σ値による多重スケール
- DoG：σ値の組み合わせによる多重スケール

これらの手法は、それぞれ異なるアプローチで鋳巣を検出しようとします。現在の問題（解像度が低い、小さい、部分的にしか認識できない欠陥の検出）に対しては、LoGまたはDoGが適している可能性が高いです。
