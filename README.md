3つの手法の比較と課題への対応を表形式で整理します。

### 手法の比較表

| 特徴項目 | Cannyエッジ+テクスチャ（現状） | LoGフィルタ+適応的閾値 | DoGフィルタ+動的閾値 |
|---------|--------------------------------|------------------------|---------------------|
| **検出原理** | エッジの強度と方向、テクスチャパターンの変化を検出 | 2次微分による輝度変化の検出（ブロブ検出に適する） | 異なるスケールでの輝度差分を検出 |
| **小さな欠陥への対応** | △ 5px×5pxの検出が困難 | ○ 複数スケールで微細な変化を検出可能 | ○ 異なるスケールの差分で検出可能 |
| **欠陥全体の検出** | × 一部分のみ検出 | ○ ブロブとして全体を検出 | ○ 全体的な特徴を捉える |
| **パラメータ調整** | 難しい（多数のパラメータ） | やや簡単（σ値と閾値） | やや簡単（σ値の組と閾値） |
| **処理速度** | 速い | 中程度 | 中程度 |
| **ノイズの影響** | 受けやすい | 比較的強い | 比較的強い |

### 現状の課題に対する改善可能性

**1. 小さな欠陥（5px×5px）の検出について：**

LoGフィルタ方式：
- 改善点：
  - 2次微分による微細な変化の検出が可能
  - 適応的閾値で局所的な変化を捉えられる
- 懸念点：
  - ノイズと小さな欠陥の区別が困難
  - 計算コストが増加

DoGフィルタ方式：
- 改善点：
  - スケール空間での特徴検出が可能
  - 動的閾値で全体的な特性を考慮
- 懸念点：
  - 極小の欠陥がスケール間で消失する可能性
  - パラメータ設定の難しさ

**2. 欠陥全体の検出について：**

LoGフィルタ方式：
- 改善点：
  - ブロブ検出として欠陥全体を捉える
  - 適応的閾値で局所的な特徴を保持
- 懸念点：
  - 欠陥境界のあいまいさ
  - 複数の欠陥が近接する場合の分離

DoGフィルタ方式：
- 改善点：
  - 異なるスケールでの特徴統合
  - 全体的な特徴を維持
- 懸念点：
  - スケール選択の難しさ
  - 処理時間の増加

### 実装上の注意点

**1. 共通の課題：**
- 5px×5pxという極小サイズは、どの手法でも検出が難しい可能性
- 画像の品質（コントラスト、ノイズ）が結果に大きく影響
- 処理時間とメモリ使用量の増加

**2. 対策案：**
- 前処理の強化
  - コントラスト強調
  - ノイズ低減
- 複数手法の結果の統合
- GPU活用による処理速度の改善

### 推奨アプローチ

1. **段階的な導入**
   - まずLoGフィルタで試験的に実装
   - 結果を評価後、必要に応じてDoGフィルタを検討

2. **ハイブリッド方式の検討**
   - 現状のCanny+テクスチャの結果も活用
   - 複数手法の結果を組み合わせて信頼性向上

3. **評価指標の設定**
   - 検出率（特に小さな欠陥）
   - 誤検出率
   - 処理速度

この比較と提案は、論文や実装例の知見に基づいていますが、実際の画像やシステム要件によって最適な方法は変わる可能性があります。特に、5px×5pxという極小サイズの検出は、どの手法でも課題となる可能性が高いことに注意が必要です。
