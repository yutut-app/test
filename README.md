それぞれの手法について、初学者向けに詳しく説明します。

### 1. Canny エッジ検出 + テクスチャ検出（現状の手法）

**概要：**
画像の輝度の急激な変化（エッジ）とテクスチャ（表面の模様や質感）の変化を組み合わせて欠陥を検出する手法です。

**処理手順：**
1. **ノイズ除去（前処理）**
   - ガウシアンフィルタでノイズを軽減
   - 画像をぼかして細かいノイズを除去

2. **Cannyエッジ検出**
   - 輝度の変化（勾配）を計算
   - エッジの方向を特定
   - 2段階の閾値処理でエッジを抽出
   - 細い線としてエッジを検出

3. **テクスチャ検出**
   - 局所的な領域の模様や質感の変化を分析
   - 正常部分と異なるテクスチャを持つ領域を特定

4. **欠陥候補の抽出**
   - エッジとテクスチャの結果を組み合わせる
   - 両方の特徴がある部分を欠陥候補として抽出
   - 抽出された領域を矩形で切り出し

**特徴：**
- エッジがはっきりした欠陥の検出に強い
- 表面の質感の変化も考慮できる
- 欠陥の一部のみを検出する傾向がある
- 低解像度や小さな欠陥の検出が難しい

### 2. マルチスケール LoG（Laplacian of Gaussian）

**概要：**
異なる大きさのガウシアンフィルタを使用して、様々なサイズの欠陥を検出する手法です。二階微分を利用するため、輝度変化の変化率を検出できます。

**処理手順：**
1. **複数スケールの作成**
   - 元画像に対して異なる大きさのガウシアンフィルタを適用
   - 小さいσ値：細かい特徴を検出
   - 大きいσ値：大きな特徴を検出

2. **ラプラシアン処理**
   - 各スケールの画像に対してラプラシアン（二階微分）を計算
   - 輝度の変化率を検出
   - エッジや欠陥の境界を強調

3. **ゼロ交差点の検出**
   - ラプラシアン値が正から負（または負から正）に変化する点を検出
   - これらの点がエッジや欠陥の境界を示す

4. **結果の統合と欠陥抽出**
   - 各スケールの結果を重ね合わせる
   - 複数のスケールで検出された領域を欠陥候補として特定
   - 検出された領域を囲む矩形を作成して切り出し

**特徴：**
- 様々なサイズの欠陥を検出可能
- 低解像度の欠陥でも検出できる可能性が高い
- 欠陥の全体的な形状を捉えやすい
- 計算コストは中程度

### 3. MSER + エッジ検出

**概要：**
画像内の安定した輝度値を持つ領域（MSER）を検出し、それらの領域のエッジを分析する手法です。

**処理手順：**
1. **MSER検出**
   - 画像の輝度値を段階的に変化させる
   - 面積が安定して変化する領域を特定
   - これらの領域を欠陥候補として抽出

2. **領域の解析**
   - 検出されたMSER領域の形状を分析
   - 各領域の輪郭を抽出
   - 領域の特徴（サイズ、形状など）を計算

3. **エッジ検出**
   - MSER領域内でエッジ検出を実行
   - 領域の境界をより正確に特定

4. **欠陥領域の確定**
   - MSER領域とエッジ情報を組み合わせる
   - 欠陥らしい特徴を持つ領域を選択
   - 選択された領域を矩形で切り出し

**特徴：**
- コントラストの低い欠陥も検出可能
- 欠陥全体を一つの領域として捉えられる
- 形状の変化に強い
- 計算コストはやや高い

### 4. DoG + 適応的閾値処理

**概要：**
異なる平滑化レベルの画像の差分を取り、局所的な閾値処理を組み合わせる手法です。

**処理手順：**
1. **ガウシアンブラー処理**
   - 2つの異なるσ値でガウシアンフィルタを適用
   - 1つ目：細かい特徴を保持
   - 2つ目：より大きな特徴を保持

2. **差分画像の作成（DoG）**
   - 2つのガウシアンブラー画像の差分を計算
   - これにより特徴的な領域が強調される

3. **適応的閾値処理**
   - 局所的な領域ごとに最適な閾値を計算
   - 周辺との輝度差に基づいて閾値を決定
   - 閾値処理で欠陥候補を二値化

4. **欠陥領域の抽出**
   - 二値化された画像から連結成分を抽出
   - 各連結成分の特徴を分析
   - 欠陥らしい特徴を持つ領域を矩形で切り出し

**特徴：**
- 局所的なコントラストの違いに強い
- 様々なサイズの欠陥に対応可能
- ノイズに比較的強い
- 処理が直感的で理解しやすい
