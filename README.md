## パラメータ設定ガイド
各パラメータの意味、影響、および調整方法を説明する。
### 1. ワーク接合部の削除
#### Crop Width（切り取り幅）
- 意味: 画像の端から削除する幅（ピクセル単位）
- 初期値: 1360
- 影響:
  - 小さくすると: 切り取る範囲が狭くなり、ワーク接合部が残る可能性が高くなる。
  - 大きくすると: 切り取る範囲が広くなり、製品の重要な部分まで削除される可能性がある。
- 調整方法:
  1. 値を1000から開始する。
  2. ワーク接合部が完全に消え、かつ重要な部分が残るまで値を調整する。
- 目標: ワーク接合部の除去と主要部分の保持のバランス
### 2. 二値化によるマスクの作成
#### Threshold Value（閾値）
- 意味: 画像を白黒に分ける境界値（0-255）
- 初期値: 190
- 影響:
  - 小さくすると: より多くのピクセルが白（対象物）となり、細部が保持されるが、ノイズも増える。
  - 大きくすると: より多くのピクセルが黒（背景）となり、ノイズは減るが、細部が失われる。
- 調整方法:
  1. 値を150から開始する。
  2. 製品が白く、背景が黒くなるまで調整する。
- 目標: 製品と背景の明確な分離
#### Kernel Size（カーネルサイズ）
- 意味: モルフォロジー演算で使用する正方形の一辺の長さ（ピクセル単位）
- 初期値: 3
- 影響:
  - 小さくすると: 細かい特徴が保持されるが、ノイズ除去効果が弱くなる。
  - 大きくすると: ノイズ除去効果が強くなるが、細かい特徴が失われる。
- 調整方法:
  1. 値を3から開始する。
  2. 小さなノイズが消えるまで値を大きくする。
- 目標: ノイズ除去と特徴保持のバランス
#### Iterations Open
- 意味: オープン処理（ノイズ除去）の繰り返し回数
- 初期値: 20
- 影響:
  - 小さくすると: 細かい特徴が保持されるが、ノイズ除去効果が弱くなる。
  - 大きくすると: ノイズ除去効果が強くなるが、対象物が縮小する。
- 調整方法:
  1. 値を5から開始する。
  2. 小さな突起が消えるまで値を大きくする。
- 目標: 不要な突起の除去
#### Iterations Close
- 意味: クローズ処理（穴埋め）の繰り返し回数
- 初期値: 20
- 影響:
  - 小さくすると: 細かい穴が残るが、対象物の形状変化が少ない。
  - 大きくすると: 穴埋め効果が強くなるが、対象物が膨張する。
- 調整方法:
  1. 値を5から開始する。
  2. 小さな穴が埋まるまで値を大きくする。
- 目標: 製品内の小さな穴の除去
### 3. エッジ検出とテクスチャ検出
#### Gaussian Kernel Size
- 意味: ガウシアンブラーで使用する正方形の一辺の長さ（ピクセル単位）
- 初期値: 9
- 影響:
  - 小さくすると: 細かいエッジが保持されるが、ノイズも残る。
  - 大きくすると: ノイズが減少するが、細かいエッジも失われる。
- 調整方法:
  1. 値を5から開始する。
  2. 細かいノイズが減るまで値を大きくする。
- 目標: ノイズ軽減と主要エッジ保持のバランス
#### Canny Min Threshold
- 意味: Cannyエッジ検出の下限閾値（0-255）
- 初期値: 50
- 影響:
  - 小さくすると: より多くの弱いエッジが検出されるが、ノイズも増える。
  - 大きくすると: ノイズは減少するが、弱いエッジが検出されなくなる。
- 調整方法:
  1. 値を30から開始する。
  2. 必要なエッジが全て検出されるまで値を下げる。
- 目標: 重要なエッジの検出
#### Canny Max Threshold
- 意味: Cannyエッジ検出の上限閾値（0-255）
- 初期値: 150
- 影響:
  - 小さくすると: より多くのエッジが検出されるが、不要なエッジも増える。
  - 大きくすると: 強いエッジのみが検出され、細かいエッジが失われる。
- 調整方法:
  1. 値を100から開始する。
  2. 不要なエッジが消えるまで値を上げる。
- 目標: 不要なエッジの除去
#### Texture Threshold
- 意味: テクスチャとして検出する輝度変化の閾値
- 初期値: 4
- 影響:
  - 小さくすると: より微細なテクスチャが検出されるが、ノイズも増える。
  - 大きくすると: 主要なテクスチャのみが検出され、細かいテクスチャが失われる。
- 調整方法:
  1. 値を2から開始する。
  2. 必要なテクスチャが検出されるまで値を下げる。
- 目標: 重要なテクスチャの検出
### 4. エッジの補完
#### Edge Kernel Size
- 意味: エッジ補完で使用する正方形の一辺の長さ（ピクセル単位）
- 初期値: 3
- 影響:
  - 小さくすると: 細かいエッジの補完が可能だが、離れたエッジは接続されにくい。
  - 大きくすると: 離れたエッジも接続されやすくなるが、不要な接続も増える。
- 調整方法:
  1. 値を3から開始する。
  2. 途切れたエッジが接続されるまで値を大きくする。
- 目標: エッジの適切な接続
#### Edge Open Iterations
- 意味: エッジのオープン処理（細いエッジの除去）の繰り返し回数
- 初期値: 2
- 影響:
  - 小さくすると: 細いエッジが残るが、重要なエッジも保持される。
  - 大きくすると: ノイズが減少するが、細いエッジも消失する。
- 調整方法:
  1. 値を1から開始する。
  2. 細いエッジや小さな点が消えるまで値を大きくする。
- 目標: ノイズとなるエッジの除去
#### Edge Close Iterations
- 意味: エッジのクローズ処理（エッジの接続）の繰り返し回数
- 初期値: 2
- 影響:
  - 小さくすると: エッジの接続が少なく、途切れたエッジが残る。
  - 大きくすると: エッジがより接続されるが、不要な接続も増える。
- 調整方法:
  1. 値を1から開始する。
  2. 途切れたエッジが接続されるまで値を大きくする。
- 目標: エッジの連続性の向上
### 5. マスクエッジ検出
#### Mask Edge Min Threshold
- 意味: マスクエッジ検出の下限閾値（0-255）
- 初期値: 50
- 影響:
  - 小さくすると: より多くのエッジが検出されるが、ノイズも増える。
  - 大きくすると: ノイズは減少するが、弱いエッジが検出されなくなる。
- 調整方法:
  1. 値を30から開始する。
  2. マスクの境界が連続的に検出されるまで値を下げる。
- 目標: マスク境界の連続的な検出
#### Mask Edge Max Threshold
- 意味: マスクエッジ検出の上限閾値（0-255）
- 初期値: 150
- 影響:
  - 小さくすると: より多くのエッジが検出されるが、不要なエッジも増える。
  - 大きくすると: 強いエッジのみが検出され、細かいエッジが失われる。
- 調整方法:
  1. 値を100から開始する。
  2. 不要なエッジが消えるまで値を上げる。
- 目標: マスクの主要境界のみの検出
#### Mask Edge Margin
- 意味: マスクエッジから除外する領域の幅（ピクセル単位）
- 初期値: 50
- 影響:
  - 小さくすると: エッジ付近の欠陥も検出されるが、ノイズも増える。
  - 大きくすると: エッジ付近のノイズが減少するが、重要な欠陥も除外される可能性がある。
- 調整方法:
  1. 値を20から開始する。
  2. エッジ付近のノイズが除去されるまで値を大きくする。
- 目標: エッジ付近のノイズ除去
### 6. 欠陥サイズフィルタリング
#### Min Defect Size
- 意味: 検出する欠陥の最小サイズ（ピクセル単位）
- 初期値: 5
- 影響:
  - 小さくすると: より小さな欠陥も検出されるが、ノイズも増える。
  - 大きくすると: ノイズは減少するが、小さな欠陥が見逃される。
- 調整方法:
  1. 検出したい最小の欠陥サイズに設定する。
  2. 小さすぎるノイズが検出されない値を選択する。
- 目標: 意味のある最小欠陥の検出
#### Max Defect Size
- 意味: 検出する欠陥の最大サイズ（ピクセル単位）
- 初期値: 100
- 影響:
  - 小さくすると: 大きな欠陥が除外されるが、誤検出も減少する。
  - 大きくすると: 大きな欠陥も検出されるが、誤検出も増える可能性がある。
- 調整方法:
  1. 検出したい最大の欠陥サイズに設定する。
  2. 大きすぎる誤検出が除外される値を選択する。
- 目標: 意味のある最大欠陥の検出
### 7. 欠陥候補の画像保存
#### Enlargement Factor
- 意味: 切り出した欠陥画像の拡大倍率
- 初期値: 10
- 影響:
  - 小さくすると: 欠陥全体が見やすくなるが、細部が不明瞭になる。
  - 大きくすると: 欠陥の細部が見やすくなるが、全体像が把握しにくくなる。
- 調整方法:
  1. 値を5から開始する。
  2. 欠陥の詳細が明確に見えるまで値を大きくする。
- 目標: 欠陥の詳細な可視化
各パラメータを調整する際は、その効果を注意深く観察し、目標とする結果が得られるまで微調整を行う必要がある。パラメータの影響は互いに関連することがあるため、複数のパラメータを同時に調整することで最適な結果を得られる場合もある。
