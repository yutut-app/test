# Keyenceカメラによるワーク加工領域の欠陥（鋳巣）検出システム

## 概要
本システムは、Keyenceカメラで撮影したワークの画像から、加工領域における鋳巣（欠陥）を検出し、その結果を分類するための画像処理システムである。

### 主な機能
1. ワーク画像の前処理
   - 左右撮影画像の判定
   - 加工領域の特定
   - マスク処理

2. 欠陥検出処理
   - Cannyエッジ検出による大きな欠陥の検出
   - DoGフィルタによる小さな欠陥の検出
   - エッジの補完と統合

3. 結果の出力
   - 欠陥候補画像の保存
   - 特徴量のCSV出力

### 処理の流れ
1. データの読み込み
2. パラメータの設定
3. 加工領域の特定
4. 欠陥候補の検出
5. エッジの補完
6. 欠陥候補のフィルタリング
7. 結果の保存

## requirements.txt
```
numpy>=1.21.0
opencv-python>=4.5.0
scikit-image>=0.18.0
matplotlib>=3.4.0
pandas>=1.3.0
```

# 1. ライブラリのインポート

本システムで使用する主要なライブラリについて説明する：

### 基本ライブラリ
- `os`：ファイル・ディレクトリ操作
  - パス操作
  - ディレクトリの作成・走査

### 画像処理ライブラリ
- `cv2`（OpenCV）：基本的な画像処理
  - 画像の読み込み・保存
  - フィルタ処理
  - エッジ検出
  - 形状検出

- `skimage`：高度な画像処理
  - `measure`：領域の特徴量計測
  - `skeletonize`：エッジの細線化処理

### 数値計算・データ処理ライブラリ
- `numpy`：数値演算
  - 配列操作
  - 行列計算
  - 数学関数

### 可視化・データ出力ライブラリ
- `matplotlib.pyplot`：結果の可視化
  - グラフ描画
  - 画像表示

- `pandas`：データフレーム操作
  - CSV出力
  - データの整形

これらのライブラリはすべて`pip install -r requirements.txt`コマンドでインストールされる。バージョンは互換性を考慮して指定されている。
